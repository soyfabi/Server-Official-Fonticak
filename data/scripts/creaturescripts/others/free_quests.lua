local questTable = {
	
	-- In Service of Yalahar --
	--[[{storage = Storage.InServiceofYalahar.Questline, storageValue = 51},
	{storage = Storage.InServiceofYalahar.Mission01, storageValue = 6},
	{storage = Storage.InServiceofYalahar.Mission02, storageValue = 8},
	{storage = Storage.InServiceofYalahar.Mission03, storageValue = 6},
	{storage = Storage.InServiceofYalahar.Mission04, storageValue = 6},
	{storage = Storage.InServiceofYalahar.Mission05, storageValue = 8},
	{storage = Storage.InServiceofYalahar.Mission06, storageValue = 5},
	{storage = Storage.InServiceofYalahar.Mission07, storageValue = 5},
	{storage = Storage.InServiceofYalahar.Mission08, storageValue = 4},
	{storage = Storage.InServiceofYalahar.Mission09, storageValue = 2},
	{storage = Storage.InServiceofYalahar.Mission10, storageValue = 1},
	{storage = Storage.InServiceofYalahar.SewerPipe01, storageValue = 1},
	{storage = Storage.InServiceofYalahar.SewerPipe02, storageValue = 1},
	{storage = Storage.InServiceofYalahar.SewerPipe03, storageValue = 1},
	{storage = Storage.InServiceofYalahar.SewerPipe04, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DiseasedDan, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DiseasedBill, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DiseasedFred, storageValue = 1},
	{storage = Storage.InServiceofYalahar.AlchemistFormula, storageValue = 1},
	{storage = Storage.InServiceofYalahar.BadSide, storageValue = 1},
	{storage = Storage.InServiceofYalahar.GoodSide, storageValue = 1},
	{storage = Storage.InServiceofYalahar.MrWestDoor, storageValue = 1},
	{storage = Storage.InServiceofYalahar.MrWestStatus, storageValue = 1},
	{storage = Storage.InServiceofYalahar.TamerinStatus, storageValue = 1},
	{storage = Storage.InServiceofYalahar.MorikSummon, storageValue = 1},
	{storage = Storage.InServiceofYalahar.QuaraState, storageValue = 1},
	{storage = Storage.InServiceofYalahar.QuaraSplasher, storageValue = 1},
	{storage = Storage.InServiceofYalahar.QuaraSharptooth, storageValue = 1},
	{storage = Storage.InServiceofYalahar.QuaraInky, storageValue = 1},
	{storage = Storage.InServiceofYalahar.MatrixState, storageValue = 1},
	{storage = Storage.InServiceofYalahar.NotesPalimuth, storageValue = 1},
	{storage = Storage.InServiceofYalahar.NotesAzerus, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DoorToAzerus, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DoorToBog, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DoorToLastFight, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DoorToMatrix, storageValue = 1},
	{storage = Storage.InServiceofYalahar.DoorToQuara, storageValue = 1},]]
	
	-- Children of the Revolution --
	--[[{storage = Storage.ChildrenoftheRevolution.Questline, storageValue = 21},
	{storage = Storage.ChildrenoftheRevolution.Mission00, storageValue = 2},
	{storage = Storage.ChildrenoftheRevolution.Mission01, storageValue = 3},
	{storage = Storage.ChildrenoftheRevolution.Mission02, storageValue = 5},
	{storage = Storage.ChildrenoftheRevolution.Mission03, storageValue = 3},
	{storage = Storage.ChildrenoftheRevolution.Mission04, storageValue = 6},
	{storage = Storage.ChildrenoftheRevolution.Mission05, storageValue = 4},
	{storage = Storage.ChildrenoftheRevolution.SpyBuilding01, storageValue = 1},
	{storage = Storage.ChildrenoftheRevolution.SpyBuilding02, storageValue = 1},
	{storage = Storage.ChildrenoftheRevolution.SpyBuilding03, storageValue = 1},
	{storage = Storage.ChildrenoftheRevolution.StrangeSymbols, storageValue = 3},
	{storage = Storage.ChildrenoftheRevolution.teleportAccess, storageValue = 1},]]
	
	-- The Ape City --
	--[[{storage = Storage.TheApeCity.Started, storageValue = 1},
	{storage = Storage.TheApeCity.Questline, storageValue = 18},
	{storage = Storage.TheApeCity.DworcDoor, storageValue = 1},
	{storage = Storage.TheApeCity.ChorDoor, storageValue = 1},
	{storage = Storage.TheApeCity.ParchmentDecyphering, storageValue = 1},
	{storage = Storage.TheApeCity.CasksDoor, storageValue = 1},
	{storage = Storage.TheApeCity.Casks, storageValue = 3},
	{storage = Storage.TheApeCity.HolyApeHair, storageValue = 1},
	{storage = Storage.TheApeCity.SnakeDestroyer, storageValue = 1},
	{storage = Storage.TheApeCity.WhisperMoss, storageValue = 1},
	{storage = Storage.TheApeCity.OldParchment, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Questline, storageValue = 29},]]
	
	-- The New Frontier --
	--[[{storage = Storage.Quest.U8_54.TheNewFrontier.Mission01, storageValue = 3},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission02[1], storageValue = 4},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission03, storageValue = 3},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission04, storageValue = 2},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05[1], storageValue = 2},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission06, storageValue = 5},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission07[1], storageValue = 2},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission08, storageValue = 2},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission09[1], storageValue = 3},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission10[1], storageValue = 2},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission10.MagicCarpetDoor, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.TomeofKnowledge, storageValue = 12},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission02.Beaver1, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission02.Beaver2, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission02.Beaver3, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05.KingTibianus, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05.Leeland, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05.Angus, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05.Wydrin, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05.Telas, storageValue = 1},
	{storage = Storage.Quest.U8_54.TheNewFrontier.Mission05.Humgolf, storageValue = 1},]]
	
	-- The Inquisition --
	--[[{storage = Storage.TheInquisition.Questline, storageValue = 18},
	{storage = Storage.TheInquisition.Mission01, storageValue = 7},
	{storage = Storage.TheInquisition.Mission02, storageValue = 3},
	{storage = Storage.TheInquisition.Mission03, storageValue = 6},
	{storage = Storage.TheInquisition.Mission04, storageValue = 3},
	{storage = Storage.TheInquisition.Mission05, storageValue = 3},	
	{storage = Storage.TheInquisition.Mission06, storageValue = 1},	
	{storage = Storage.TheInquisition.GrofGuard, storageValue = 1},
	{storage = Storage.TheInquisition.KulagGuard, storageValue = 1},
	{storage = Storage.TheInquisition.TimGuard, storageValue = 1},
	{storage = Storage.TheInquisition.WalterGuard, storageValue = 1},
	{storage = Storage.TheInquisition.StorkusVampiredust, storageValue = 20},]]
	
	-- Sea Routes Around Yalahar (Travel) --
	--[[{storage = Storage.SearoutesAroundYalahar.TownsCounter, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.AbDendriel, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.Darashia, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.Venore, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.Ankrahmun, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.PortHope, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.Thais, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.LibertyBay, storageValue = 1},
	{storage = Storage.SearoutesAroundYalahar.Carlin, storageValue = 1},]]
	
	-- Explorer Society --
	--[[{storage = Storage.ExplorerSociety.QuestLine, storageValue = 62},
	{storage = Storage.ExplorerSociety.JoiningTheExplorers, storageValue = 5},
	{storage = Storage.ExplorerSociety.SpectralStone, storageValue = 1},
	{storage = Storage.ExplorerSociety.TheIceDelivery, storageValue = 8},
	{storage = Storage.ExplorerSociety.TheButterflyHunt, storageValue = 17},
	{storage = Storage.ExplorerSociety.ThePlantCollection, storageValue = 26},
	{storage = Storage.ExplorerSociety.TheLizardUrn, storageValue = 29},
	{storage = Storage.ExplorerSociety.TheBonelordSecret, storageValue = 32},
	{storage = Storage.ExplorerSociety.TheOrcPowder, storageValue = 35},
	{storage = Storage.ExplorerSociety.CalassaQuest, storageValue = 3},
	{storage = Storage.ExplorerSociety.TheMemoryStone, storageValue = 41},
	{storage = Storage.ExplorerSociety.TheRuneWritings, storageValue = 44},
	{storage = Storage.ExplorerSociety.TheEctoplasm, storageValue = 47},
	{storage = Storage.ExplorerSociety.TheSpectralDress, storageValue = 50},
	{storage = Storage.ExplorerSociety.TheSpectralStone, storageValue = 55},
	{storage = Storage.ExplorerSociety.TheAstralPortals, storageValue = 56},
	{storage = Storage.ExplorerSociety.TheIslandofDragons, storageValue = 59},
	{storage = Storage.ExplorerSociety.TheIceMusic, storageValue = 62},
	{storage = Storage.ExplorerSociety.BansheeDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.BonelordsDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.CalassaDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.MemoryStoneDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.ElvenDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.OrcDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.ChorurnDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.DwacatraDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.TheElvenPoetry, storageValue = 38},
	{storage = Storage.ExplorerSociety.SpectralStoneDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.IceMusicDoor, storageValue = 1},
	{storage = Storage.ExplorerSociety.TheElvenPoetry, storageValue = 38},
	{storage = Storage.ExplorerSociety.TheElvenPoetry, storageValue = 38},]]
	
	-- Tibia Tales --
	--[[{storage = Storage.TibiaTales.DefaultStart, storageValue = 1},
	{storage = Storage.TibiaTales.ToAppeaseTheMightyQuest, storageValue = 1},]]
	
	-- The Ice Islands --
	--[[{storage = Storage.TheIceIslands.Questline, storageValue = 40},
	{storage = Storage.TheIceIslands.Mission01, storageValue = 3},
	{storage = Storage.TheIceIslands.Mission02, storageValue = 5},
	{storage = Storage.TheIceIslands.Mission03, storageValue = 3},
	{storage = Storage.TheIceIslands.Mission04, storageValue = 2},
	{storage = Storage.TheIceIslands.Mission05, storageValue = 6},
	{storage = Storage.TheIceIslands.Mission06, storageValue = 8},
	{storage = Storage.TheIceIslands.Mission07, storageValue = 3},
	{storage = Storage.TheIceIslands.Mission08, storageValue = 4},
	{storage = Storage.TheIceIslands.Mission09, storageValue = 2},
	{storage = Storage.TheIceIslands.Mission10, storageValue = 2},
	{storage = Storage.TheIceIslands.Mission11, storageValue = 2},
	{storage = Storage.TheIceIslands.Mission12, storageValue = 6},
	{storage = Storage.TheIceIslands.PickAmount, storageValue = 3},
	{storage = Storage.TheIceIslands.PaintSeal, storageValue = 2},
	{storage = Storage.TheIceIslands.SulphurLava, storageValue = 1},
	{storage = Storage.TheIceIslands.SporesMushroom, storageValue = 1},
	{storage = Storage.TheIceIslands.FrostbiteHerb, storageValue = 1},
	{storage = Storage.TheIceIslands.FlowerCactus, storageValue = 1},
	{storage = Storage.TheIceIslands.FlowerBush, storageValue = 1},
	{storage = Storage.TheIceIslands.MemoryCrystal, storageValue = 1},
	{storage = Storage.TheIceIslands.Obelisk01, storageValue = 5},
	{storage = Storage.TheIceIslands.Obelisk02, storageValue = 5},
	{storage = Storage.TheIceIslands.Obelisk03, storageValue = 5},
	{storage = Storage.TheIceIslands.Obelisk04, storageValue = 5},
	{storage = Storage.TheIceIslands.yakchalDoor, storageValue = 1},]]
	
	-- Barbarian Test --
	--[[{storage = Storage.TheIceIslands.Questline, storageValue = 1},
	{storage = Storage.BarbarianTest.Questline, storageValue = 8},
	{storage = Storage.BarbarianTest.Mission01, storageValue = 3},
	{storage = Storage.BarbarianTest.Mission02, storageValue = 2},
	{storage = Storage.BarbarianTest.Mission03, storageValue = 2},
	{storage = Storage.BarbarianTest.MeadTotalSips, storageValue = 13},
	{storage = Storage.BarbarianTest.MeadSuccessSips, storageValue = 9},
	{storage = Storage.BarbarianTest.HonoraryBarbarian, storageValue = 1},]]
	
}

local function playerFreeQuestStart(playerId, index)
	local player = Player(playerId)
	if not player then
		return
	end

	for i = 1, 5 do
		index = index + 1
		if not questTable[index] then
			player:sendTextMessage(MESSAGE_INFO_DESCR, "You received free missions with their accesses. Good luck!")
			player:setStorageValue(Storage.FreeQuests, 1)
			return
		end

		if player:getStorageValue(questTable[index].storage) ~= questTable[index].storageValue then
			player:setStorageValue(questTable[index].storage, questTable[index].storageValue)
		end
	end

	addEvent(playerFreeQuestStart, 500, playerId, index)
end

local FreeQuests = CreatureEvent("FreeQuest")
function FreeQuests.onLogin(player)
	if not configManager.getBoolean(configKeys.TOGGLE_FREE_QUEST) or
	player:getStorageValue(Storage.FreeQuests) == 1 then
		return true
	end

	player:sendTextMessage(MESSAGE_INFO_DESCR, "You will receive free missions in a few moments...")
	addEvent(playerFreeQuestStart, 500, player:getId(), 0)
	return true
end
--FreeQuests:register()